---
title: å¿«é€Ÿä¸Šæ‰‹
description: Flake FHS æ ¸å¿ƒæ¦‚å¿µä¸å¿«é€Ÿå…¥é—¨æŒ‡å—
---

import { LinkCard, CardGrid, Steps, Tabs, TabItem } from '@astrojs/starlight/components';

**ä¸ºä»€ä¹ˆéœ€è¦ Flake FHSï¼Ÿ**

Nix Flake æä¾›äº†æå¤§çš„è‡ªç”±åº¦ï¼Œä½†è¿™å¾€å¾€å¯¼è‡´äº†é¡¹ç›®çš„**å¯ç»´æŠ¤æ€§å±æœº**ï¼š
*   **æºç éš¾ä»¥å®šä½**ï¼šè¦åœ¨å‡ ç™¾è¡Œ `flake.nix` ä¸­æ‰¾åˆ° `packages.x86_64-linux.app` å¯¹åº”çš„æºç å®šä¹‰æå…¶å›°éš¾ã€‚
*   **ç»“æ„ä¸ç»Ÿä¸€**ï¼šæ¯ä¸ªé¡¹ç›®çš„ç»„ç»‡æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œå¢åŠ äº†å­¦ä¹ æˆæœ¬ã€‚

**Flake FHS** é€šè¿‡å¼•å…¥ä¸€å¥—æ ‡å‡†çš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ (FHS)ï¼Œå°† Flake Outputs ç›´æ¥æ˜ å°„åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚**åªè¦çœ‹åˆ°äº†ç›®å½•ç»“æ„ï¼Œä½ å°±çŸ¥é“å¯¹åº”çš„ Output åœ¨å“ªé‡Œã€‚**

## 1åˆ†é’Ÿå…¥é—¨ (Tutorial)

<Steps>

1.  **åˆå§‹åŒ–é¡¹ç›®**

    Flake FHS æä¾›äº†å¤šç§åˆå§‹åŒ–æ¨¡æ¿ï¼Œä»¥é€‚åº”ä¸åŒçš„é¡¹ç›®éœ€æ±‚ï¼š

    <Tabs>
      <TabItem label="å…¨æ–° Nix é¡¹ç›®" icon="rocket">
        é€‚ç”¨äºä½œä¸º **nixos-config** æˆ–**çº¯ Nix è½¯ä»¶åŒ…ä»“åº“**ã€‚

        <Tabs>
          <TabItem label="æ¨è (çŸ­å)" icon="star">
            **ç‰¹ç‚¹**ï¼šç›®å½•åç®€æ´ (`pkgs`, `hosts`)ï¼Œç¬¦åˆç¤¾åŒºä¹ æƒ¯ã€‚

            ```bash
            nix flake init --template github:luochen1990/flake-fhs#short
            ```
          </TabItem>
          <TabItem label="æ ‡å‡† (é•¿å)" icon="document">
            **ç‰¹ç‚¹**ï¼šç›®å½•åå®Œæ•´ (`packages`, `nixosConfigurations`)ï¼Œä¸¥æ ¼å¯¹åº” Nix æœ¯è¯­ã€‚

            ```bash
            nix flake init --template github:luochen1990/flake-fhs#std
            ```
          </TabItem>
          <TabItem label="æœ€å°åŒ–" icon="minimize">
            **ç‰¹ç‚¹**ï¼šä»…åŒ…å« `flake.nix`ï¼Œç”±ä½ è‡ªå·±åˆ›å»ºç›®å½•ç»“æ„ã€‚

            ```bash
            nix flake init --template github:luochen1990/flake-fhs#zero
            ```
          </TabItem>
        </Tabs>
      </TabItem>

      <TabItem label="ç°æœ‰é¡¹ç›®é›†æˆ" icon="puzzle">
        é€‚ç”¨äºä¸º**éçº¯ Nix é¡¹ç›®** (å¦‚ Python, Node.js, Rust) æ·»åŠ  Nix æ”¯æŒã€‚

        å®ƒä¼šä¸ºä½ ç”Ÿæˆæœ€å°åŒ–çš„ `flake.nix` å’Œå¿…è¦çš„è¾…åŠ©æ–‡ä»¶ï¼Œè€Œä¸å¹²æ‰°ç°æœ‰çš„é¡¹ç›®ç»“æ„ã€‚

        ```bash
        # å°† Nix æ”¯æŒé›†æˆåˆ°å½“å‰é¡¹ç›®
        nix flake init --template github:luochen1990/flake-fhs#project
        ```
      </TabItem>
    </Tabs>

2.  **æ·»åŠ ä¸€ä¸ªåŒ…**

    åˆ›å»ºæ–‡ä»¶ `pkgs/hello.nix`ï¼š

    ```nix
    { writeShellScriptBin }:
    writeShellScriptBin "hello" ''
      echo "Hello, Flake FHS!"
    ''
    ```

    *æ— éœ€æ‰‹åŠ¨ä¿®æ”¹ `flake.nix`ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å‘ç°å®ƒã€‚*

3.  **æ„å»ºä¸è¿è¡Œ**

    ```bash
    nix build .#hello
    nix run .#hello
    ```

</Steps>

<LinkCard title="ğŸ“– æŸ¥çœ‹å®Œæ•´ç›®å½•æ˜ å°„è¡¨ (Directory Map)" description="åŒ…å«æ‰€æœ‰æ”¯æŒçš„ç›®å½•åŠå…¶å¯¹åº”çš„ Nix å‘½ä»¤å¯¹ç…§ã€‚" href="/zh-cn/directory-map" />
