---
title: Flake FHS
description: Flake FHS æ¡†æ¶çš„å®˜æ–¹æ–‡æ¡£ç«™ç‚¹ - é€šè¿‡æ ‡å‡†åŒ–ç›®å½•ç»“æ„è‡ªåŠ¨ç”Ÿæˆ flake outputs
template: splash
hero:
  tagline: é€šè¿‡æ ‡å‡†åŒ–çš„ç›®å½•ç»“æ„è‡ªåŠ¨ç”Ÿæˆ Nix Flake outputsï¼Œç®€åŒ– Nix é¡¹ç›®é…ç½®
  image:
    file: ../../../assets/logo.svg
  actions:
    - text: å¿«é€Ÿå¼€å§‹
      link: /zh-cn/manual/
      icon: rocket
      variant: primary
    - text: æŸ¥çœ‹ GitHub
      link: https://github.com/luochen1990/flake-fhs
      icon: github
      variant: secondary
---

import { Card, CardGrid, LinkCard, FileTree, Badge } from '@astrojs/starlight/components';

## ä»€ä¹ˆæ˜¯ Flake FHSï¼Ÿ

**Flake FHS** (Flake Filesystem Hierarchy Standard) æ˜¯ä¸€ä¸ª Nix Flake æ¡†æ¶ï¼Œæ—¨åœ¨è§£å†³ Nix é¡¹ç›®é…ç½®è¿‡äºè‡ªç”±å¯¼è‡´çš„**æºç å®šä½å›°éš¾**å’Œ**å¯ç»´æŠ¤æ€§å·®**çš„é—®é¢˜ã€‚

é€šè¿‡å¼•å…¥æ ‡å‡†åŒ–çš„ç›®å½•ç»“æ„ï¼Œå®ƒå°†æ··ä¹±çš„ Flake Outputs é‡æ–°ç»„ç»‡ä¸ºæ¸…æ™°çš„æ–‡ä»¶æ ‘ï¼Œè®©ä½ ä¸€çœ¼å°±èƒ½çœ‹æ‡‚é¡¹ç›®çš„æ¶æ„ã€‚

---

## ä¸€é¢—ç›®å½•æ ‘å°±æ˜¯ä¸€ä¸ªFlake

åªéœ€å°†æ–‡ä»¶æ”¾å…¥çº¦å®šçš„ç›®å½•ï¼Œå°±è‡ªåŠ¨è·å¾—å¯¹åº”çš„Flake Output

<ul style={{ listStyleType: 'none', paddingLeft: 0 }}>
  <li style={{ marginBottom: '0.5rem' }}>
    ğŸ“„ flake.nix
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ pkgs/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“„ ripgrep.nix <Badge text="packages.<system>.ripgrep" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ apps/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“„ deploy.nix <Badge text="apps.<system>.deploy" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ hosts/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>
          ğŸ“‚ desktop/
          <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
            <li>ğŸ“„ configuration.nix <Badge text="nixosConfigurations.desktop" variant="default" size="small" /></li>
          </ul>
        </li>
      </ul>
    </details>
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ modules/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“„ tailscale.nix <Badge text="nixosModules.tailscale" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ checks/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“„ smoke-test.nix <Badge text="checks.<system>.smoke-test" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ shells/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“„ rust.nix <Badge text="devShells.<system>.rust" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
  <li style={{ marginBottom: '0.5rem' }}>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ lib/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“„ utils.nix <Badge text="lib.utils" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
  <li>
    <details>
      <summary style={{ cursor: 'pointer' }}>ğŸ“‚ templates/</summary>
      <ul style={{ listStyleType: 'none', paddingLeft: '1.5em', marginTop: '0.25rem' }}>
        <li>ğŸ“‚ python-web/ <Badge text="templates.python-web" variant="default" size="small" /></li>
      </ul>
    </details>
  </li>
</ul>

---

## æ ¸å¿ƒç‰¹æ€§

<CardGrid stagger>
  <Card title="æ‰€è§å³æ‰€å¾—" icon="document">
    è§£å†³äº†åŸå§‹ Flake ç»“æ„è¿‡äºè‡ªç”±å¯¼è‡´çš„æºç å®šä½éš¾é¢˜ã€‚çœ‹åˆ° `pkgs/hello`ï¼Œä½ å°±çŸ¥é“å®ƒå¯¹åº” `packages` ä¸­çš„ `hello`ã€‚
  </Card>
  <Card title="ç»Ÿä¸€æ„å»ºèŒƒå¼" icon="puzzle">
    æ— è®ºæ˜¯è½¯ä»¶åŒ…ã€åº”ç”¨ç¨‹åºè¿˜æ˜¯æµ‹è¯•ç”¨ä¾‹ï¼Œå‡é‡‡ç”¨ç»Ÿä¸€çš„ `package.nix` + `callPackage` æœºåˆ¶æ„å»ºï¼Œå…±äº«ä¾èµ–ã€‚
  </Card>
  <Card title="æ™ºèƒ½æ¨¡å—åŠ è½½" icon="setting">
    è‡ªåŠ¨é€’å½’å‘ç° `modules/` ä¸‹çš„ NixOS æ¨¡å—ã€‚å®ç°æ¨¡å—çš„â€œå£°æ˜å³æ³¨å†Œï¼Œå¯ç”¨å³åŠ è½½â€ã€‚
  </Card>
  <Card title="æ¸è¿›å¼é‡‡ç”¨" icon="random">
    æ”¯æŒæ··åˆæ¨¡å¼ã€‚ä½ å¯ä»¥ä»…è®© Flake FHS æ¥ç®¡ä¸€éƒ¨åˆ†è¾“å‡ºï¼Œè€Œå°†å…¶ä»–éƒ¨åˆ†ç•™ç»™ä¼ ç»Ÿæ–¹å¼å®šä¹‰ï¼Œå®ç°å¹³æ»‘è¿ç§»ã€‚
  </Card>
  <Card title="æè‡´å¼€å‘ä½“éªŒ" icon="laptop">
    å†…ç½® `treefmt` æ ¼å¼åŒ–æ”¯æŒã€‚æ”¯æŒä» `packages` è‡ªåŠ¨æ´¾ç”Ÿ `devShells`ï¼Œæ— éœ€é‡å¤å®šä¹‰å³å¯ä¸€é”®è¿›å…¥è°ƒè¯•ç¯å¢ƒã€‚
  </Card>
  <Card title="Colmena é›†æˆ" icon="rocket">
    å¼€ç®±å³ç”¨çš„ Colmena æ”¯æŒã€‚åªéœ€å¼€å¯é€‰é¡¹ï¼Œå³å¯åˆ©ç”¨ Colmena è¿›è¡Œé«˜æ•ˆçš„å¤šä¸»æœºå¹¶è¡Œéƒ¨ç½²ã€‚
  </Card>
</CardGrid>

<div style="text-align: center; margin-top: 2rem;">
  <LinkCard title="å¼€å§‹ä½¿ç”¨ Flake FHS â†’" href="/zh-cn/manual/" />
</div>
