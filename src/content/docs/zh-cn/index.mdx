---
title: Flake FHS
description: Flake FHS 框架的官方文档站点 - 通过标准化目录结构自动生成 flake outputs
template: splash
hero:
  tagline: 通过标准化的目录结构自动生成 Nix Flake outputs，简化 Nix 项目配置
  image:
    file: ../../../assets/logo.svg
  actions:
    - text: 快速开始
      link: /zh-cn/manual/
      icon: rocket
      variant: primary
    - text: 查看 GitHub
      link: https://github.com/luochen1990/flake-fhs
      icon: github
      variant: secondary
---

import { Card, CardGrid, LinkCard, FileTree, Badge } from '@astrojs/starlight/components';

## 什么是 Flake FHS？

**Flake FHS** (Flake Filesystem Hierarchy Standard) 是一个 Nix Flake 框架，旨在解决 Nix 项目配置过于自由导致的**源码定位困难**和**可维护性差**的问题。

通过引入标准化的目录结构，它将混乱的 Flake Outputs 重新组织为清晰的文件树，让你一眼就能看懂项目的架构。

---

## 核心特性

<CardGrid stagger>
  <Card title="所见即所得" icon="document">
    解决了原始 Flake 结构过于自由导致的源码定位难题。看到 `pkgs/hello`，你就知道它对应 `packages` 中的 `hello`。
  </Card>
  <Card title="统一构建范式" icon="puzzle">
    无论是软件包、应用程序还是测试用例，均采用统一的 `package.nix` + `callPackage` 机制构建，共享依赖。
  </Card>
  <Card title="智能模块加载" icon="setting">
    自动递归发现 `modules/` 下的 NixOS 模块。实现模块的“声明即注册，启用即加载”。
  </Card>
  <Card title="渐进式采用" icon="random">
    支持混合模式。你可以仅让 Flake FHS 接管一部分输出，而将其他部分留给传统方式定义，实现平滑迁移。
  </Card>
</CardGrid>

---

## 规范目录一瞥

只需将文件放入约定的目录，框架会自动完成剩余工作。

<FileTree>

- flake.nix
- pkgs/
  - ripgrep.nix       <Badge text="packages.<system>.ripgrep" variant="default" size="small" />
- apps/
  - deploy.nix        <Badge text="apps.<system>.deploy" variant="default" size="small" />
- hosts/
  - desktop.nix       <Badge text="nixosConfigurations.desktop" variant="default" size="small" />
- modules/
  - tailscale.nix     <Badge text="nixosModules.tailscale" variant="default" size="small" />
- checks/
  - smoke-test.nix    <Badge text="checks.<system>.smoke-test" variant="default" size="small" />
- shells/
  - rust.nix          <Badge text="devShells.<system>.rust" variant="default" size="small" />
- lib/
  - utils.nix         <Badge text="lib.utils" variant="default" size="small" />
- templates/
  - python-web/       <Badge text="templates.python-web" variant="default" size="small" />

</FileTree>

<div style="text-align: center; margin-top: 2rem;">
  <LinkCard title="开始使用 Flake FHS →" href="/zh-cn/manual/" />
</div>
